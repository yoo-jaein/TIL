# Server Virtualization

## 서버 가상화
서버로 사용되는 컴퓨터는 프로세서, 메모리, 스토리지와 같은 하드웨어로 구성된다. 서버 가상화는 하드웨어에 탑재되어 있는 프로세서나 메모리의 사용 시간, 스토리지의 용량을 작게 분할하여 여러 사용자에게 할당하는 것이다.  
사용자는 할당된 시스템 자원을 각각 점유하여 사용하게 된다. 서버 가상화를 통해 물리적으로는 하드웨어가 한 대뿐이지만, 개인 전용의 서버를 사용자마다 제공하고 있는 것 처럼 보이게 된다.

## 하이퍼바이저에 의한 가상화
하나하나로 보이는 서버를 '가상 서버' 또는 '가상 머신'이라고 하며, 이처럼 서버 가상화를 실현하는 소프트웨어를 하이퍼바이저(Hypervisor)라고 한다.  
VMware의 ESXi, Microsoft의 Hyper-V, Linux의 KVM과 같은 제품이 사용된다.  
가상 서버는 실제로 물리적인 서버와 똑같은 기능을 제공하므로 서버마다 독립적인 OS를 탑재하여 개별적으로 애플리케이션을 실행시킬 수 있다. 이를 통해 하드웨어의 사용 효율을 높일 수 있다.

## 컨테이너에 의한 가상화
하나의 OS에 '분리된 애플리케이션 실행 환경'으로 보이는 '컨테이너'를 만들어 독립된 서버처럼 사용하는 것이 '컨테이너에 의한 가상화'이다.  
컨테이너를 구현하는 소프트웨어로는 Docker라는 오픈소스 소프트웨어가 있다.

## 차이점

하이퍼바이저에 의한 가상화와 컨테이너에 의한 가상화는 둘 다 분리된 애플리케이션 실행 환경을 제공해 준다는 점은 같다. 차이점은 OS에 있다.  

가상화로 만들어진 가상 머신들은 각각에 OS를 가동시켜야 하므로 가상 머신별로 프로세서나 메모리를 소비하며 스토리지도 필요하다. 반면에 컨테이너들은 하나의 OS에서 가동되므로 리소스 소비가 적고 스토리지의 사용량도 극히 적다. 가상 머신과 비교해서 기동 시간도 짧다. 따라서 동일한 성능의 하드웨어라면 보다 많은 컨테이너를 동시에 작동시킬 수 있다.  

또한, 컨테이너를 관리하는 소프트웨어들은 하드웨어나 OS의 차이를 흡수시켜주게 되는데 이 때문에 실행 환경이 바뀌어도 작동하는데 문제가 없다. 가상 머신의 경우 실행 환경이 바뀌면 하드웨어나 OS의 설정을 확인해야 한다.  

정리하자면 가상 머신은 가상 머신마다 다른 OS를 사용할 수 있고, 컨테이너는 동일한 하나의 OS 위에서 돌아간다.  
가상 머신의 경우 자유도가 높지만 시스템 자원의 부담이 크고 이동성이 낮다. 컨테이너의 경우 OS는 제한적이지만 시스템 자원의 부담이 작고 이동성이 높다. 따라서 용도에 따라 나눠서 사용해야 한다.

## 서버 가상화의 장점

1. 물리 머신 집약  
가상화하지 않은 기계는 자신의 능력을 최대한 사용하지 못하며 사용률도 불규칙하다. 이를 모아서 집약하면 사용률을 높이고, 기계의 개수를 줄일 수 있고, 유지하고 관리하는 비용을 절감할 수 있다.  
   

2. 소프트웨어 정의  
설치나 배선 작업을 하지 않고 웹 콘솔이나 커맨드로 구성을 신속하게 변경할 수 있다. 심지어 가동 중에도 할 수 있어서 운용 관리 업무의 작업 효율을 높일 수 있다.  


3. 라이브 마이그레이션  
가상 서버의 실체는 그 서버의 설정 파일에 들어있는 정보이다. 설정 파일에는 CPU 능력, 메모리 용량, 네트워크 주소 등과 같은 정보가 쓰여있다. 이러한 정보를 하이퍼바이저가 읽고 추출하여 가상 서버를 생성하게 된다. 이를 통해 복잡한 구성을 쉽게 할 수 있다. 또한, 설정 파일을 여러 대의 물리 머신이 공유하여 서로의 가동 상황을 감시하게 하면 한 쪽이 장애로 정지하더라도 살아있는 머신이 그 설정 파일을 읽어서 가상 서버를 가동시킬 수 있다. 이를 통해 이용자는 장애의 영향을 받지 않고 가상 서버를 계속 이용할 수 있게 된다.  