# Chunk based Step
청크 기반 스텝

일반적으로 청크 기반의 스텝을 사용한다. 청크는 커밋 간격 commit interval에 의해 정의된다. 커밋 간격을 50개 아이템으로 설정했다면, 잡은 50개 아이템을 읽고 50개 아이템을 처리한 다음에 한 번에 50개 아이템을 기록한다.

StepBuilderFactory에서 StepBuilder를 가져오는 것부터 스텝 구성이 시작된다. 그 다음 chunk 메서드를 사용해 청크 기반 스텝을 사용하도록 지정한다. 이 때 커밋 간격 값을 전달하고, 그 간격 단위로 레코드가 처리된 후 작업이 커밋된다.

커밋 간격을 지정하는 것은 중요하다. 10으로 설정되어 있다면, 이는 10개의 레코드를 읽고 처리할 때까지 쓰기 작업을 하지 않음을 의미한다. 커밋 간격을 1로 설정하게 되면 잡은 아이템 하나를 읽어 바로 처리하고 쓴다. 이것이 기존의 아이템 기반 처리 방식이다. 하지만 아이템 기반 방식을 사용하면 잡의 상태가 JobRepository에 커밋할 때마다 갱신된다. 따라서 쓰기 측면에서 최상의 성능을 얻으려면 커밋 간격을 어느 정도 크게 설정하는 것이 중요하다. 

## 참고
스프링 배치 완벽 가이드 2/e  